import expected_concrete_syntax

lexer foo_lexer {

    match p"'.'" {
        if previous_token is id then send(tick, 1)
        else send(char, 3)
    }

    match "access" {
        if previous_token is tick then send(id, 6)
        else send(access, 6)
    }

    access
    char
    dot <- "."
    id <- p"[a-zA-ZÃ©ðŸ™‚]+"
    tick <- "'"
    @trivia() whitespace <- p"[ \n]+"
}

@with_lexer(foo_lexer)
grammar foo_grammar {
    @main_rule expr <- or(
        | DotExpr(expr "." name)
        | AttrRef(expr "'" name)
        | AccessType("access" name)
        | char_lit
        | name
    )
    char_lit <- CharLit(@char)
    name <- Name(@id)
}
