== analysis.adb ==

Language name: Foo

Grammar rules:
  Main_Rule (default)
  Var_Decl
  Expr
  Atom
  Number
  Ref
  Name

Use of null context:
Got a Precondition_Failure exception: null context

Use of null unit:
Got a Precondition_Failure exception: null unit

Use of null node:
Got a Precondition_Failure exception: null node

Parsing example.txt...
Has example.txt? -> TRUE
Has foo.txt? -> FALSE
Line 2:
  "var b = 1 + a;"
Traversing its parsing tree...
<VarDeclList example.txt:1:1-2:15>
<VarDecl example.txt:1:1-1:11>
<Name example.txt:1:5-1:6>
<Number example.txt:1:9-1:10>
<VarDecl example.txt:2:1-2:15>
<Name example.txt:2:5-2:6>
<Addition example.txt:2:9-2:14>
<Number example.txt:2:9-2:10>
<Ref example.txt:2:13-2:14>
<Name example.txt:2:13-2:14>

Testing various node operations:
Root.Is_Null -> FALSE
Root.Next_Sibling.Image -> None
Root.Next_Sibling.Is_Null -> TRUE
Root.Child (2).Image -> <VarDecl example.txt:2:1-2:15>
Root.Child (2).Previous_Sibling.Image -> <VarDecl example.txt:1:1-1:11>
[...].Previous_Sibling = [...] -> TRUE
[...].Previous_Sibling = [...].Previous_Sibling.Next_Sibling -> FALSE
Root.Children:
  -> <VarDecl example.txt:1:1-1:11>
  -> <VarDecl example.txt:2:1-2:15>

Use of stale node reference:
Got a Stale_Reference_Error exception: unit was reparsed


== introspection.adb ==

All types
=========

* AnalysisUnit
* BigInt
* Bool
* Character
* EnvRebindings
* Int
* SourceLocationRange
* String
* Token
* Symbol
* AnalysisUnitKind
  is an enum
* LookupKind
  is an enum
* DesignatedEnvKind
  is an enum
* GrammarRule
  is an enum
* FooNode.entity.array
  is an array
* FooNode.entity
  is a node
* Expr.entity
  is a node
* Addition.entity
  is a node
* Number.entity
  is a node
* Ref.entity
  is a node
* FooNodeBaseList.entity
  is a node
* VarDecl.list.entity
  is a node
* Name.entity
  is a node
* VarDecl.entity
  is a node

Trying to get the debug name of an invalid type...
LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type

Enum types
==========

Analysis_Unit_Kind ( 11)
  Default value: 0

  1: Unit_Specification
  2: Unit_Body

Lookup_Kind ( 12)
  Default value: 0

  1: Recursive
  2: Flat
  3: Minimal

Designated_Env_Kind ( 13)
  Default value: 1

  1: None
  2: Current_Env
  3: Named_Env
  4: Direct_Env

Grammar_Rule ( 14)
  Default value: 0

  1: Main_Rule_Rule
  2: Var_Decl_Rule
  3: Expr_Rule
  4: Atom_Rule
  5: Number_Rule
  6: Ref_Rule
  7: Name_Rule

Is_Enum_Type: invalid T argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type

Invalid args for Enum_Type_Name:
Invalid Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-enum Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid enum type

Invalid args for Enum_Last_Value:
Invalid Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-enum Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid enum type

Invalid args for Enum_Default_Value:
Invalid Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-enum Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid enum type

Invalid args for Enum_Value_Name:
Invalid Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-enum Enum argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid enum type
Out-of-bounds Index argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid enum value index

Arrays
======

FooNode.entity.array
Array of FooNode.entity

Is_Array_Type: invalid T argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type

Invalid args for Array_Element_Type:
Invalid T argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-array T argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid array type

Nodes
=====

Foo_Node ( 16)
  is abstract
  base = Bad_Type_Error: trying to get base type of root node
  last derivation = Var_Decl ( 24)
  derivations:
    Expr ( 17)
    Foo_Node_Base_List ( 21)
    Name ( 23)
    Var_Decl ( 24)

Expr ( 17)
  is abstract
  base = Foo_Node ( 16)
  last derivation = Ref ( 20)
  derivations:
    Addition ( 18)
    Number ( 19)
    Ref ( 20)

Addition ( 18)
  base = Expr ( 17)
  last derivation = Addition ( 18)
  derivations:
    <none>

Number ( 19)
  base = Expr ( 17)
  last derivation = Number ( 19)
  derivations:
    <none>

Ref ( 20)
  base = Expr ( 17)
  last derivation = Ref ( 20)
  derivations:
    <none>

Foo_Node_Base_List ( 21)
  is abstract
  base = Foo_Node ( 16)
  last derivation = Var_Decl_List ( 22)
  derivations:
    Var_Decl_List ( 22)

Var_Decl_List ( 22)
  base = Foo_Node_Base_List ( 21)
  last derivation = Var_Decl_List ( 22)
  derivations:
    <none>

Name ( 23)
  base = Foo_Node ( 16)
  last derivation = Name ( 23)
  derivations:
    <none>

Var_Decl ( 24)
  base = Foo_Node ( 16)
  last derivation = Var_Decl ( 24)
  derivations:
    <none>

Is_Node_Type: Invalid T argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type

Invalid args for Node_Type_Name:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Invalid args for Is_Abstract:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Invalid args for Is_Concrete:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Invalid args for Base_Type:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type
Root Node argument: LANGKIT_SUPPORT.ERRORS.INTROSPECTION.BAD_TYPE_ERROR: trying to get base type of root node

Invalid args for Derived_Types:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Invalid args for Last_Derived_Type:
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Check Is_Derived_From:
Checking: root derives from root
Checking: expr derives from root
Checking: addition derives from root
Checking: ref does not derive from number
Invalid Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Node argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type
Invalid Parent argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid value type
Non-node Parent argument: LANGKIT_SUPPORT.ERRORS.PRECONDITION_FAILURE: invalid node type

Done
