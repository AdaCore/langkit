import lexer_example
@with_lexer(foo_lexer)
grammar foo_grammar {
    @main_rule main_rule <- list*(decl)
    decl <- Decl(id DeclError("error"))
    id <- Identifier(@identifier)

}

@abstract class FooNode : Node {

    ## Return an entity for Self with some metadata set. Used to check
    ## equality in the Ada API (see main.adb).
    @export fun set_dummy (): FooNode = FooNode(
        node=self.node, info=EntityInfo(
            md=Metadata(dummy=true), rebindings=self.info.rebindings, from_rebound=self.info.from_rebound
        )
    )
}

class Decl : FooNode {
    @parse_field id : Identifier
    @parse_field error : DeclError
}

@qualifier enum class DeclError : FooNode {
}

class Identifier : FooNode implements TokenNode {
}
